#### Docker Network
Docker Network — это внутренняя сеть docker которая служит для объединения контейнеров в разные подсети и изоляции контейнеров на уровне сети

![1](https://github.com/user-attachments/assets/53212f44-6416-4730-a961-ea42f234fd0f)

##### Типы драйверов
Driver          | Description      | 
----------------|------------------|
bridge          | Сетевой драйвер по умолчанию
host            | Удаляет сетевую изоляцию между контейнером и хостом Docker
overlay         | Оверлейные сети соединяют несколько демонов Docker вместе
macvlan         | Назначает MAC-адрес контейнеру 
none            | Полностью изолирует контейнер от хоста и других контейнеров
IPvLan          | Сети IPvlan обеспечивают полный контроль над адресацией IPv4 и IPv6

##### Docker Network
```python
connect         
create          
disconnect      
inspect         
ls              
prune           
rm              
```

##### Контейнерные сети
Помимо определяемых пользователем сетей, вы можете напрямую подключить контейнер к сетевому стеку другого контейнера, используя ``--network container:<name|id>``формат флага<br>

Следующие флаги не поддерживаются для контейнеров, использующих ``container``: сетевой режим:
```python
--add-host
--hostname
--dns
--dns-search
--dns-option
--mac-address
--publish
--publish-all
--expose
```

В следующем примере запускается контейнер Redis с привязкой Redis к localhost, затем выполняется redis-cliкоманда и подключение к серверу Redis через localhostинтерфейс.
```python
 docker run -d --name redis example/redis --bind 127.0.0.1
 docker run --rm -it --network container:redis example/redis-cli -h 127.0.0.1
``` 
##### Опубликованные порты
По умолчанию, когда вы создаете или запускаете контейнер с помощью docker createили docker run, контейнеры в сетях мостов не открывают порты для внешнего мира<br> 
Используйте флаг --publishили -p, чтобы сделать порт доступным для служб за пределами сети мостов<br> 
Это создает правило брандмауэра на хосте, сопоставляя порт контейнера с портом на хосте Docker для внешнего мира. Вот несколько примеров:

Значение флага                 | Описание                                                                                                                        | 
-------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
-p 8080:80                     | Сопоставьте порт 8080на хосте Docker с портом TCP 80в контейнере
-p 192.168.1.100:8080:80       | Сопоставьте порт 8080на IP-адресе хоста Docker 192.168.1.100с портом TCP 80в контейнере
-p 8080:80/udp                 | Сопоставьте порт 8080на хосте Docker с портом UDP 80в контейнере
-p 8080:80/tcp -p 8080:80/udp  | Сопоставьте порт TCP 8080на хосте Docker с портом TCP 80в контейнере, а порт UDP 8080на хосте Docker с портом UDP 80в контейнере

##### Важно!!!
> Публикация портов контейнера по умолчанию небезопасна. Это означает, что когда вы публикуете порты контейнера, он становится доступен не только хосту Docker, но и внешнему миру
> Если вы включите IP-адрес локального хоста ( 127.0.0.1или ::1) с флагом публикации, то только хост Docker и его контейнеры смогут получить доступ к опубликованному порту контейнера
```python
 docker run -p 127.0.0.1:8080:80 -p '[::1]:8080:80' nginx
```
##### IP-адрес и имя хоста
При создании сети распределение адресов IPv4 включено по умолчанию, его можно отключить с помощью --ipv4=false. Распределение адресов IPv6 можно включить с помощью --ipv6.
```python
 docker network create --ipv6 --ipv4=false v6net
```
##### DNS-сервисы
По умолчанию контейнеры используют те же DNS-серверы, что и хост, но это можно переопределить с помощью --dns<br>
По умолчанию контейнеры наследуют настройки DNS, определенные в /etc/resolv.confфайле конфигурации. Контейнеры, которые подключаются к bridgeсети по умолчанию, получают копию этого файла<br>
Значение флага                 | Описание                                                                                                                        | 
-------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
--dns                          |	IP-адрес DNS-сервера. Чтобы указать несколько DNS-серверов, используйте несколько --dnsфлагов. DNS-запросы будут пересылаться из сетевого пространства имен контейнера, поэтому, например, --dns=127.0.0.1ссылается на собственный петлевой адрес контейнера.
--dns-search	                  | Домен поиска DNS для поиска неполных имен хостов. Чтобы указать несколько префиксов поиска DNS, используйте несколько --dns-searchфлагов.
--dns-opt	                     | Пара ключ-значение, представляющая параметр DNS и его значение. Смотрите документацию вашей операционной системы для resolv.confдопустимых параметров.
--hostname	                    | Имя хоста, которое контейнер использует для себя. По умолчанию используется идентификатор контейнера, если не указано иное.





#### Установка absible на centos 7.

##### Перед установкой сгенерируем ключ ssh-key.

Ключ генерируется с помощью утилиты ssh-keygen, например:

```
-# ssh-keygen -C "$(whoami)@$(hostname)-$(date -I)"
```

Отвечаем везде да (Enter).<br>
Далее копируем ключ на удаленный хост.<br>
```
-# ssh-copy-id -p 2224 username@remote_host  #если порт менялся на ssh.

-# ssh-copy-id username@remote_host #если не менялся и остался по умолчанию 22
```

Можно создать папку authorized_keys и туда поместить ключ.

```
-# cat ~/.ssh/id_rsa.pub | ssh username@remote_host "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

Чтобы проверить, действительно ли скопировался открытый ключ, точно так же, как в первом варианте, найдем искомый файл authorized_keys на удаленном узле и посмотрим его содержимое.

```
~# cat /root/.ssh/id_rsa
```

#### Установка absible на debian.
Выполняем команды:

```
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install software-properties-common
Если уж вообще жопа, можно установить репозиторий.
sudo apt-add-repository ppa:ansible/ansible
sudo apt-get install ansible
ansible --version
```

После установки будет созданы конфигурационные файлы, которые находятся в расположениях:

```
/etc/ansible/hosts — спсиок хостов для управления
/etc/ansible/ansible.cfg — непосредственно настройки ansible
```
![1](https://github.com/user-attachments/assets/a1dda92e-6e5d-4bbe-a3e9-b7b744ff4e34)

Чтобы начать использовать Ansible, необходимо настроить хосты, на которых будут выполняться задачи.<br> 
Для этого необходимо отредактировать файл hosts в корне /etc/ansible/hosts, в котором указать список хостов.<br>
```
Структура  файла такая:
[networkstation]
192.168.85.137  #можно по имени
192.168.85.139  #можно по имени
[database]
db1
db2
```

Если это один хост, можно вызвать команду 

```
ansible networkstation -m yum -a 'name=nano state=present'
```
 
Дальнейший шаг — создание так называемого плэйбука. Playbook — файл, описывающий порядок действий, которые необходимо выполнить на хостах. Пример:

![2](https://github.com/user-attachments/assets/8b435bc2-a6d8-4838-a4f2-479a3733b5c2)

![3](https://github.com/user-attachments/assets/a9f4e3b5-1edf-4a8a-8fe2-ad51708c8c59)

![4](https://github.com/user-attachments/assets/60db59cd-d513-4d0d-b2f6-fc526f0e20c6)

![5](https://github.com/user-attachments/assets/a81d5229-2bc4-427a-9296-a806ac4c07d9)

![9](https://github.com/user-attachments/assets/ddab84ea-633a-43b8-a85d-5403054ee1a2)

![8](https://github.com/user-attachments/assets/7edcea7e-97d1-4d68-968d-e6fcaa9e7f6d)

![7](https://github.com/user-attachments/assets/4b19f337-c7e7-4360-aa14-7707f178d9bf)

![6](https://github.com/user-attachments/assets/67c9ab46-8c03-40e1-a654-679391bd22ee)

![12](https://github.com/user-attachments/assets/f1abbce7-7590-4e55-bf40-b387bbd86d55)

![11](https://github.com/user-attachments/assets/9628297c-87f9-4ce3-bf7a-1a141e342aef)

![10](https://github.com/user-attachments/assets/82a1fe7c-e310-4ef5-8f55-1be219f2e7ce)


















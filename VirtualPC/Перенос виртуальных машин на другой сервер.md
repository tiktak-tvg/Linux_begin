#### Перенос виртуальной машины OS Debian c Citrix XenServer на VMware.
Конвертации будем делать средствами очень древней команды, которая называется dd. Она предназначена для того, чтобы что-то куда-то копировать побайтово.<br>
И свободной программой с открытым исходным кодом для эмуляции аппаратного обеспечения различных платформ QEMU.<br>
Для начала установим QEMU.<br>
QEMU может имитировать различные аппаратные компоненты, такие как процессор, память, диск, сетевой интерфейс.<br>Эти возможности позволяют запускать одновременно виртуальные машины,
под управлением различных операционных систем и приложений. 
```
sudo apt-get install qemu-kvm libvirt-daemon-system libvirt-clients
```
или так
```
apt install aptitude
aptitude install qemu-kvm libvirt-clients libvirt-daemon-system
```
Далее набор инструментов которые нам понадобятся.

```
apt install qemu-utils
yum install qemu-utils
```
> Debian -   pkg-qemu-devel@lists.alioth.debian.org

Просмотрим версии Qemu.
```
Debian# apt show qemu-system-x86 | grep Ver
Centos# /usr/libexec/qemu-kvm --version   или yum info qemu-kvm
```
Заходим на виртуальную машину которую будем переносить, можно удаленно.<br>
Смотрим сколько дисков мы имеем.<br>
```
lsblk
``` 
![image](https://github.com/tvgVita69/Linux_begin/assets/98489171/e8ef8bda-fc5e-4ad6-a14d-adb07412e63e)

В нашем варианте два диска xvda(15Gb) и xvdb(200Gb), значит снимаем образы и конвертируем с двух дисков.<br>
Для дисков большого объёма будем подключать дополнительное пространство папку общего доступа.<br>
Делаем шару на диске, даём общий доступ. У меня общая папка будет на OS Windows<br>
![image](https://github.com/tvgVita69/Linux_begin/assets/98489171/473d6a7e-bfef-4f41-8f16-e5456ee5ce31)
 
![image](https://github.com/tvgVita69/Linux_begin/assets/98489171/1a72e8ab-a435-4c5e-bf12-fc9d04ff7e81)

Всё сделали. Теперь монтируем эту общую папку в линуксе.<br>
```
mkdir /mnt/share
mount -t cifs "//192.168.50.x/backup" -o username=имя пользователя,password=XXX  /mnt/share
```
Переходим в неё.<br>
```
cd /mnt/share
```
Если всё павильно, то ругаться не будет.<br>
Создадим образы наших дисков.<br>
> Выполним команду
```
dd if=/dev/xvda of=xvda.img bs=8M conv=sync
```
>- Параметры:
- if: указывает на источник, т.е. на то, откуда копируем. Указывается файл, который может быть как обычным файлом, так и файлом устройства.
- of: указывает на файл назначения. То же самое, писать можем как в обычный файл, так и напрямую в устройство.
- bs: количество байт, которые будут записаны за раз. Можно представлять этот аргумент как размер куска данные, которые будут записаны или прочитаны, а количество кусков регулируется уже следующим параметром.
- count: как раз то число, которое указывает: сколько кусочков будет скопировано.

qemu-img convert -o compat6 xvda.img -O vmdk hdd1.vmdk

>- где:
```
xvda.img — путь до образа в формате img;
hdd1. — путь до образа в формате vmdk.
```
Для второго диска выполняем те же команды что и для первого.<br>
```
dd if=/dev/xvdb of=xvdb.img bs=8M conv=sync
qemu-img convert -o compat6 xvdb.img -O vmdk hdd2.vmdk
```
>- где:
```
xvdb.img — путь до образа в формате img;
hdd2. — путь до образа в формате vmdk.
```
Далее устанавливаем виртуальную машину VMware® Workstation Pro как показано на скиншотах.
 
 
 
 
 


